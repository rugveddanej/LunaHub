local player = game.Players.LocalPlayer
local collectchest = false
task.spawn(function()
    while task.wait() do
        if collectchest then
            repeat task.wait()
                if collectchest then
                    pcall(function()
                        for a, b in pairs(game.Workspace.Debree:GetChildren()) do
                            if b.Name == "Loot_Chest" then
                                for c, d in pairs(b.Drops:GetChildren()) do
                                    b.Add_To_Inventory:InvokeServer(d.Name)
                                end
                                b:Destroy()
                            end
                        end 
                    end)
                end
            until not collectchest
        end
    end
end)

function findMob(hrp)
    for i, v in pairs(workspace.Mobs:GetChildren()) do
        if v:IsA("Folder") and v:FindFirstChildWhichIsA("Model") then   
            local model = v:FindFirstChildWhichIsA("Model")
            if model:FindFirstChild("Humanoid") and model:FindFirstChild("Humanoid").Health > 0 then
                if hrp then
                    if model:FindFirstChild('HumanoidRootPart') then
                        return model
                    end
                else
                    return model
                end
            end
        end
    end
end

local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local Window = OrionLib:MakeWindow({Name = "Luna Hub", HidePremium = false, SaveConfig = false, ConfigFolder = "LunaSave", IntroText = "Luna Hub"})

local mugen = Window:MakeTab({
    Name = "Mugen",
    Icon = "rbxassetid://18718506911",
    PremiumOnly = false
})

local killaura = mugen:AddSection({
    Name = "Kill Auras"
})

local ArrowKA = false
local BringMobs = false


killaura:AddToggle({
    Name = 'Arrow Kill Aura',
    Default = false,
    Callback = function(state)
        ArrowKA = state
        task.spawn(function()
            while ArrowKA do 
                local target =  findMob(true)
                if target then
                    local args = {
                        [1] = "arrow_knock_back_damage",
                        [2] = player.Character,
                        [3] = target:GetModelCFrame(),
                        [4] = target,
                        [5] = math.huge,
                        [6] = math.huge
                    }

                    game:GetService("ReplicatedStorage").Remotes.To_Server.Handle_Initiate_S_:InvokeServer(unpack(args))
                end
                task.wait()
            end
        end)
        task.spawn(function()
            while ArrowKA do
                local args = {
                    [1] = "skil_ting_asd",
                    [2] = player,
                    [3] = "arrow_knock_back",
                    [4] = 5
                }

                game:GetService("ReplicatedStorage").Remotes.To_Server.Handle_Initiate_S_:InvokeServer(unpack(args))
                task.wait(6)
            end
        end)
    end
})

-- Assuming required modules
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local clash = mugen:AddSection({
    Name = "Clash"
})

clash:AddButton({
    Name = "Instant Clash",
    Callback = function()
        spawn(function()
            local args = {
                [1] = "Change_Value",
                [2] = workspace:WaitForChild("Debree"):WaitForChild("clash_folder"):WaitForChild(game.Players.LocalPlayer.Name.."vsEnmu"):WaitForChild(game.Players.LocalPlayer.Name),
                [3] = 10000
            }
            game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("To_Server"):WaitForChild("Handle_Initiate_S"):FireServer(unpack(args))
        end)
    end
})

local autochest = mugen:AddSection({
    Name = "Chest"
})

autochest:AddToggle({
    Name = "Auto Collect Chests",
    Default = false,
    Callback = function(state)
        collectchest = state
    end
})

local settingstab = Window:MakeTab({
    Name = "Settings",
    Icon = "rbxassetid://18718015946",
    PremiumOnly = false
})

local gui = settingstab:AddSection({
    Name = "GUI"
})

-- Add the Unload GUI button
gui:AddButton({
    Name = "Unload Gui",
    Callback = function()
        OrionLib:Destroy()
    end
})